<p>Se dă un șir de n fracții. Fiecare fracție este dată printr-o pereche de numere reprezentând numărătorul și numitorul fracției. De exemplu <code>2010 34</code> reprezintă fracția <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-1-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mfrac><mn>2010</mn><mn>34</mn></mfrac></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1" style="width: 2.113em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.734em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.139em, 1001.73em, 2.762em, -999.997em); top: -2.216em; left: 0em;"><span class="mrow" id="MathJax-Span-2"><span class="mfrac" id="MathJax-Span-3"><span style="display: inline-block; position: relative; width: 1.518em; height: 0px; margin-right: 0.111em; margin-left: 0.111em;"><span style="position: absolute; clip: rect(3.358em, 1001.41em, 4.169em, -999.997em); top: -4.435em; left: 50%; margin-left: -0.701em;"><span class="mn" id="MathJax-Span-4" style="font-size: 70.7%; font-family: MathJax_Main;">2010</span><span style="display: inline-block; width: 0px; height: 4.007em;"></span></span><span style="position: absolute; clip: rect(3.358em, 1000.71em, 4.169em, -999.997em); top: -3.623em; left: 50%; margin-left: -0.376em;"><span class="mn" id="MathJax-Span-5" style="font-size: 70.7%; font-family: MathJax_Main;">34</span><span style="display: inline-block; width: 0px; height: 4.007em;"></span></span><span style="position: absolute; clip: rect(0.869em, 1001.52em, 1.247em, -999.997em); top: -1.296em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 1.518em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.221em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.516em; border-left: 0px solid; width: 0px; height: 1.692em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mfrac><mn>2010</mn><mn>34</mn></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-1"> 2010 \over 34</script> . O fracție poate fi ireductibilă sau se poate<br>
simplifica. În exemplul precedent, <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-2-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mfrac><mn>2010</mn><mn>34</mn></mfrac></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-6" style="width: 2.113em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.734em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.139em, 1001.73em, 2.762em, -999.997em); top: -2.216em; left: 0em;"><span class="mrow" id="MathJax-Span-7"><span class="mfrac" id="MathJax-Span-8"><span style="display: inline-block; position: relative; width: 1.518em; height: 0px; margin-right: 0.111em; margin-left: 0.111em;"><span style="position: absolute; clip: rect(3.358em, 1001.41em, 4.169em, -999.997em); top: -4.435em; left: 50%; margin-left: -0.701em;"><span class="mn" id="MathJax-Span-9" style="font-size: 70.7%; font-family: MathJax_Main;">2010</span><span style="display: inline-block; width: 0px; height: 4.007em;"></span></span><span style="position: absolute; clip: rect(3.358em, 1000.71em, 4.169em, -999.997em); top: -3.623em; left: 50%; margin-left: -0.376em;"><span class="mn" id="MathJax-Span-10" style="font-size: 70.7%; font-family: MathJax_Main;">34</span><span style="display: inline-block; width: 0px; height: 4.007em;"></span></span><span style="position: absolute; clip: rect(0.869em, 1001.52em, 1.247em, -999.997em); top: -1.296em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 1.518em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.221em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.516em; border-left: 0px solid; width: 0px; height: 1.692em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mfrac><mn>2010</mn><mn>34</mn></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-2"> 2010 \over 34</script> se simplifică prin <code>2</code> și rezultă <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-3-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mfrac><mn>1005</mn><mn>17</mn></mfrac></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-11" style="width: 2.113em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.734em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.139em, 1001.73em, 2.762em, -999.997em); top: -2.216em; left: 0em;"><span class="mrow" id="MathJax-Span-12"><span class="mfrac" id="MathJax-Span-13"><span style="display: inline-block; position: relative; width: 1.518em; height: 0px; margin-right: 0.111em; margin-left: 0.111em;"><span style="position: absolute; clip: rect(3.358em, 1001.36em, 4.169em, -999.997em); top: -4.435em; left: 50%; margin-left: -0.701em;"><span class="mn" id="MathJax-Span-14" style="font-size: 70.7%; font-family: MathJax_Main;">1005</span><span style="display: inline-block; width: 0px; height: 4.007em;"></span></span><span style="position: absolute; clip: rect(3.358em, 1000.71em, 4.169em, -999.997em); top: -3.623em; left: 50%; margin-left: -0.376em;"><span class="mn" id="MathJax-Span-15" style="font-size: 70.7%; font-family: MathJax_Main;">17</span><span style="display: inline-block; width: 0px; height: 4.007em;"></span></span><span style="position: absolute; clip: rect(0.869em, 1001.52em, 1.247em, -999.997em); top: -1.296em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 1.518em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.221em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.516em; border-left: 0px solid; width: 0px; height: 1.692em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mfrac><mn>1005</mn><mn>17</mn></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-3"> 1005 \over 17</script>.</p>

<h1>Cerința</h1>

<p>Să se afișeze, pentru fiecare fracție:</p>

<p>1) Prin câte moduri distincte se poate simplifica.<br>
2) Fracția ireductibilă.</p>

<h1>Date de intrare</h1>

<p>În fișierul de intrare <code>fractii4.in</code> pe prima linie se găsesc numerele <code>P</code> și <code>n</code>, iar pe următoarele <code>n</code> linii se găsesc <code>n</code> perechi de numere, reprezentând numărătorul și numitorul fiecărei fracții, separate printr-un spațiu.</p>

<h1>Date de ieșire</h1>

<p>Pe fiecare din cele <code>n</code> linii ale fișierului <code>fractii4.out</code> se găsesc, pentru fiecare fracție, în ordinea dată în fișierul de intrare:</p>

<p>1) Dacă <code>P = 1</code>, numărul de simplificări distincte posibile. Dacă nu este posibilă nicio simplificare (fracția este ireductibilă) se va afișa <code>-1</code>.<br>
2) Dacă <code>P = 2</code>, fracția ireductibilă, numărătorul și numitorul fiind separați prin <code>/</code>.</p>

<h1>Restricții și precizări</h1>

<ul>
	<li><code>n &lt;= 100 000</code></li>
	<li><code>0 &lt;</code> numitor, numărător <code>&lt; 2 000 000</code></li>
	<li><code>P</code> este <code>1</code> sau <code>2</code></li>
</ul>

<h1>Exemplul 1</h1>

<p><code>fractii4.in</code></p>

<pre contenteditable="true" editable="true">1 4
8 4
3 2
1 6
12 6</pre>

<p><code>fractii4.out</code></p>

<pre contenteditable="true" editable="true">2
-1
-1
3</pre>

<h3>Explicație</h3>

<p>Pentru acest test <code>P = 1</code>, deci se va rezolva doar cerinţa 1).<br>
Prima fracție se poate simplifica prin <code>2</code> moduri: prin <code>2</code> și <code>4</code>.<br>
A doua este ireductibilă, deci se va afișa <code>-1</code>.<br>
A treia este ireductibilă, deci se va afișa <code>-1</code>.<br>
A patra se poate simplifica prin <code>3</code> moduri: <code>2</code>, <code>3</code> și <code>6</code>.</p>

<h1>Exemplul 2</h1>

<p><code>fractii4.in</code></p>

<pre contenteditable="true" editable="true">2 3
22 6
11 4
125 25</pre>

<p><code>fractii4.out</code></p>

<pre contenteditable="true" editable="true">11/3
11/4
5/1</pre>

<h3>Explicație</h3>

<p>Pentru acest test <code>P = 2</code>, deci se va rezolva doar cerinţa 2).<br>
Prima fracție se simplifică prin <code>2</code>.<br>
A doua fracție este ireductibilă, deci va fi afișată fără schimbare.<br>
Ultima fracție poate fi redusă prin <code>25</code> și devine ireductibilă. Chiar dacă<br>
numitorul este <code>1</code>, acesta va fi afișat.</p>						
<pre class="EnlighterJSRAW" data-enlighter-language="cpp">#include <fstream>
using namespace std;
ifstream fin("fractii4.in");
ofstream fout("fractii4.out");
int prim(int n)
{
    if(n==0 || n==1) return 0;
    if(n==2) return 1;
    if(n%2==0) return 0;
    else for(int i=3;i*i<n;i++)
    {
        if(n%i==0) return 0;
    }
    return 1;
}
int prime(int a, int b)
{
    int d,r;
    if(b==0) d=a;
    else while(b!=0)
    {
        r=a%b;
        a=b;
        b=r;
    }
    d=a;
    if(d==1) return 1;
    else return 0;
}
int main()
{
    int n,a,b,p;
    fin>>p>>n;
    for(int i=1;i<=n;i++)
    {
        fin>>a>>b;
        int x=a,y=b,r,q;
        if(p==1)
        {
         if(prime (a,b)) fout<<"-1"<<endl;
         else
        {
         int d=0,d1,cate=1,p=0;
         while(b!=0)
        {
            r=a%b;
            a=b;
            b=r;
        }
        d1=a;
        for(int j=1;j*j<=d1;j++)
    {
        if(d1%j==0) d=d+2;
        if(j*j==d1) d--;
    }
        fout<<d-1<<endl;
        }
        }
        else
            if(p==2)
        {
            int t;
            while(b!=0)
        {
            r=a%b;
            a=b;
            b=r;
        }
        t=a;
            fout<<x/t<<"/"<<y/t<<endl;
        }
    }
return 0;
}</pre>
